---

title: Preprocessing data


keywords: fastai
sidebar: home_sidebar

summary: "Preprocessing data for the modelling step."
description: "Preprocessing data for the modelling step."
nb_path: "nbs/preprocessing.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/preprocessing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="s2">&quot;plotly&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dep_var</span> <span class="o">=</span> <span class="s1">&#39;meter_reading&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">loading</span><span class="o">.</span><span class="n">N_TRAIN</span> <span class="o">=</span> <span class="mi">100_000</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_path</span> <span class="o">=</span> <span class="n">loading</span><span class="o">.</span><span class="n">DATA_PATH</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Loading">Loading<a class="anchor-link" href="#Loading"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">ashrae_data</span> <span class="o">=</span> <span class="n">loading</span><span class="o">.</span><span class="n">load_all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Splitting">Splitting<a class="anchor-link" href="#Splitting"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_dataset" class="doc_header"><code>split_dataset</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_dataset</code>(<strong><code>X</code></strong>:<code>DataFrame</code>, <strong><code>split_kind</code></strong>:<code>str</code>=<em><code>'random'</code></em>, <strong><code>train_frac</code></strong>:<code>float</code>=<em><code>0.8</code></em>, <strong><code>t_train</code></strong>:<code>DataFrame</code>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="c1">#split_kind = &#39;random&#39;</span>
<span class="c1">#split_kind = &#39;time&#39;</span>
<span class="c1"># split_kind = &#39;fix_time&#39;</span>
<span class="n">split_kind</span> <span class="o">=</span> <span class="s1">&#39;time_split_day&#39;</span>

<span class="n">t_train</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">train_frac</span> <span class="o">=</span> <span class="o">.</span><span class="mi">8</span>
<span class="n">splits</span> <span class="o">=</span> <span class="n">split_dataset</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">split_kind</span><span class="o">=</span><span class="n">split_kind</span><span class="p">,</span> <span class="n">train_frac</span><span class="o">=</span><span class="n">train_frac</span><span class="p">,</span>
                       <span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;sets </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span><span class="si">}</span><span class="s1">, train </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s2">&quot;meter_train&quot;</span><span class="p">])</span><span class="si">:</span><span class="s1">.4f</span><span class="si">}</span><span class="s1">, valid </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s2">&quot;meter_train&quot;</span><span class="p">])</span><span class="si">:</span><span class="s1">.4f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">t_train</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]][[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]]</span>
<span class="n">t_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="c1">#t_train.to_parquet(data_path/&#39;t_train.parquet&#39;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Visualizing the split</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                 <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
                 <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">meter_reading</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span>
                <span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                 <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>
                 <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">meter_reading</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)))),</span> 
                <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10000</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;label&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Wrangling">Wrangling<a class="anchor-link" href="#Wrangling"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>potentially sensible cleaning to do (<a href="https://www.kaggle.com/purist1024/ashrae-simple-data-cleanup-lb-1-08-no-leaks">https://www.kaggle.com/purist1024/ashrae-simple-data-cleanup-lb-1-08-no-leaks</a>):</p>
<ul>
<li>remove all 0s for meter 0</li>
<li>remove all 0s for meter 2 and 3 if not summer</li>
<li>potentially remove 0s for meter 1 during winter</li>
<li>remove "known-bad" electrical readings from the first 141 days of the data for site 0 (i.e. UCF)</li>
<li>remove most absurdly high readings from building 1099. These are orders of magnitude higher than all data, and have been emperically seen in LB probes to be harmful outliers.</li>
<li>time time zone for weather data</li>
<li>impute nas for weather data</li>
<li>convert cyclic features, like hour, to  2d features (sin,cos)</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Basic-processing">Basic processing<a class="anchor-link" href="#Basic-processing"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Processor" class="doc_header"><code>class</code> <code>Processor</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L101" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Processor</code>(<strong><code>dep_var</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>time_col</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>t_train</code></strong>:<code>Series</code>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Only applying the <code>dep_var</code> transform</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;meter&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> 
             <span class="n">x</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">,</span> <span class="n">facet_row</span><span class="o">=</span><span class="s1">&#39;meter&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Building-363">Building 363<a class="anchor-link" href="#Building-363"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The meter readings for <code>building_id</code> 363 before July 30th are likely due to a construction phase since the bulding's year value is 2017. So this method removes the readings from during the construction time.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.fix_bid_363" class="doc_header"><code>Processor.fix_bid_363</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L212" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.fix_bid_363</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fix_bid_363&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fix_bid_363&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">bid</span><span class="o">=</span><span class="mi">363</span><span class="p">,</span> <span class="n">meter</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There seem to be quite a few imputed / filled values in the meter readings, being visible as constant meter readings for more than a week at a time. This method removes those values.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> 
                                  <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">])</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">bid</span><span class="o">=</span><span class="mi">363</span><span class="p">,</span> <span class="n">meter</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Removing-all-0s-for-meter-0">Removing all 0s for meter 0<a class="anchor-link" href="#Removing-all-0s-for-meter-0"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.remove_0s_meter0" class="doc_header"><code>Processor.remove_0s_meter0</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L228" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.remove_0s_meter0</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_0s_meter0&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">meter</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Removing-all-0s-for-meters-2-and-3-outside-of-summer">Removing all 0s for meters 2 and 3 outside of summer<a class="anchor-link" href="#Removing-all-0s-for-meters-2-and-3-outside-of-summer"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.remove_not_summer_0s_meter_2_and_3" class="doc_header"><code>Processor.remove_not_summer_0s_meter_2_and_3</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L243" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.remove_not_summer_0s_meter_2_and_3</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_not_summer_0s_meter_2_and_3&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">meter</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Removing-&quot;bad&quot;-electrical-(meter-0)-readings-from-the-first-141-days-of-site-0-(i.e.-UCF)">Removing "bad" electrical (meter 0) readings from the first 141 days of site 0 (i.e. UCF)<a class="anchor-link" href="#Removing-&quot;bad&quot;-electrical-(meter-0)-readings-from-the-first-141-days-of-site-0-(i.e.-UCF)"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.remove_bad_meter0_readings_of_first_141days" class="doc_header"><code>Processor.remove_bad_meter0_readings_of_first_141days</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L264" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.remove_bad_meter0_readings_of_first_141days</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_bad_meter0_readings_of_first_141days&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                       <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">meter</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixing-absurdly-high-meter-2-readings-for-building-1099">Fixing absurdly high meter 2 readings for building 1099<a class="anchor-link" href="#Fixing-absurdly-high-meter-2-readings-for-building-1099"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.fix_bid_1099" class="doc_header"><code>Processor.fix_bid_1099</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L292" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.fix_bid_1099</code>(<strong><code>threshold</code></strong>:<code>float</code>=<em><code>10.0</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fix_bid_1099&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fix_bid_1099&#39;</span><span class="p">:{}}</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">bid</span><span class="o">=</span><span class="mi">1099</span><span class="p">,</span> <span class="n">meter</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Removing-imputed-weeks">Removing imputed weeks<a class="anchor-link" href="#Removing-imputed-weeks"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.remove_imputed_weeks" class="doc_header"><code>Processor.remove_imputed_weeks</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L308" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.remove_imputed_weeks</code>(<strong><code>dep_var</code></strong>=<em><code>'meter_reading'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_imputed_weeks&#39;</span><span class="p">:{</span><span class="s1">&#39;dep_var&#39;</span><span class="p">:</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_imputed_weeks&#39;</span><span class="p">:{</span><span class="s1">&#39;dep_var&#39;</span><span class="p">:</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Removing-outliers">Removing outliers<a class="anchor-link" href="#Removing-outliers"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are outliers! 😨 Let's remove them as well. Example <code>building_id</code> 60 and <code>meter</code> 1.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">],</span> 
                                  <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">])</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">(</span><span class="n">bid</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">meter</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.remove_outliers" class="doc_header"><code>Processor.remove_outliers</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L332" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.remove_outliers</code>(<strong><code>f</code></strong>:<code>float</code>=<em><code>10</code></em>, <strong><code>dep_var</code></strong>:<code>str</code>=<em><code>'meter_reading'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_outliers&#39;</span><span class="p">:{</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;dep_var&#39;</span><span class="p">:</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;remove_outliers&#39;</span><span class="p">:{</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;dep_var&#39;</span><span class="p">:</span><span class="s1">&#39;meter_reading&#39;</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">inspection</span><span class="o">.</span><span class="n">InspectTimeseries</span><span class="p">(</span><span class="n">_df</span><span class="p">,</span> <span class="n">building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                                  <span class="n">dep_var</span><span class="o">=</span><span class="s1">&#39;meter_reading_log1p&#39;</span><span class="p">)</span>
<span class="n">it</span><span class="o">.</span><span class="n">inspect_boldly</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-random-noise-feature">Adding random noise feature<a class="anchor-link" href="#Adding-random-noise-feature"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_random_noise_features" class="doc_header"><code>Processor.add_random_noise_features</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L349" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_random_noise_features</code>(<strong><code>col</code></strong>:<code>str</code>=<em><code>'random_noise'</code></em>, <strong><code>noise_func</code></strong>:<code>Callable</code>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>noise_type</code></strong>:<code>str</code>=<em><code>'cont'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_random_noise_features&#39;</span><span class="p">:{}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-building-features">Adding building features<a class="anchor-link" href="#Adding-building-features"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_building_features" class="doc_header"><code>Processor.add_building_features</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L368" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_building_features</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_building_features&#39;</span><span class="p">:{}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-weather-features">Adding weather features<a class="anchor-link" href="#Adding-weather-features"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_weather_features" class="doc_header"><code>Processor.add_weather_features</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L385" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_weather_features</code>(<strong><code>fix_time_offset</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>add_na_indicators</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>impute_nas</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                       <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_train&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                       <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_train&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                       <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_train&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">],</span>
                       <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_train&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-time-features">Adding time features<a class="anchor-link" href="#Adding-time-features"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_time_features" class="doc_header"><code>Processor.add_time_features</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L457" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_time_features</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_time_features&#39;</span><span class="p">:{}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-statistics-of-target-values">Adding statistics of target values<a class="anchor-link" href="#Adding-statistics-of-target-values"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_dep_var_stats" class="doc_header"><code>Processor.add_dep_var_stats</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L488" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_dep_var_stats</code>(<strong><code>grp_cols</code></strong>:<code>List</code>[<code>str</code>]=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_dep_var_stats&#39;</span><span class="p">:{}}</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>

<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_test&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">60</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_test&#39;</span><span class="p">][</span><span class="s1">&#39;meter&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
<span class="n">tmp_test</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_test&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">_df_test</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp_test</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-one-hot-encodings">Adding one hot encodings<a class="anchor-link" href="#Adding-one-hot-encodings"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Processor.add_onehot_encoded" class="doc_header"><code>Processor.add_onehot_encoded</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L549" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Processor.add_onehot_encoded</code>(<strong><code>onehot_cols</code></strong>:<code>List</code>[<code>str</code>]=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">()</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;add_onehot_encoded&#39;</span><span class="p">:{}}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">][</span><span class="s1">&#39;building_id&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">60</span><span class="p">)]</span>
<span class="n">_df</span><span class="p">,</span> <span class="n">_vars</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">_vars</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Applying-multiple-processing-steps-through-part-of-the-train-and-test">Applying multiple processing steps through part of the train and test<a class="anchor-link" href="#Applying-multiple-processing-steps-through-part-of-the-train-and-test"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Train set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="n">t_train</span><span class="o">=</span><span class="n">t_train</span><span class="p">)</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;add_time_features&#39;</span><span class="p">:{},</span>
    <span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                            <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                            <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span>
    <span class="s1">&#39;add_building_features&#39;</span><span class="p">:{},</span>
<span class="p">}</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_train&#39;</span><span class="p">]</span>
<span class="n">df_train</span><span class="p">,</span> <span class="n">var_names</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                                <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_train&#39;</span><span class="p">],</span>
                                <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Running through part of the test set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;meter_test&#39;</span><span class="p">]</span>
<span class="n">df_test</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">tfms_configs</span><span class="o">=</span><span class="n">tfms_config</span><span class="p">,</span>
                       <span class="n">df_weather</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;weather_test&#39;</span><span class="p">],</span>
                       <span class="n">df_building</span><span class="o">=</span><span class="n">ashrae_data</span><span class="p">[</span><span class="s1">&#39;building&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Making sure the columns are aligned in train/var and test</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="align_test" class="doc_header"><code>align_test</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L582" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>align_test</code>(<strong><code>df_train</code></strong>:<code>DataFrame</code>, <strong><code>var_names</code></strong>:<code>dict</code>, <strong><code>df_test</code></strong>:<code>DataFrame</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">align_test</span><span class="p">(</span><span class="n">df_train</span><span class="p">,</span> <span class="n">var_names</span><span class="p">,</span> <span class="n">df_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Applying-processing-to-all-samples">Applying processing to all samples<a class="anchor-link" href="#Applying-processing-to-all-samples"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Done testing. Let's apply the transforms to the entire data set. Takes about 20min with <code>remove_imputed_weeks</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Sanity-checking-processing-results-and-storing">Sanity checking processing results and storing<a class="anchor-link" href="#Sanity-checking-processing-results-and-storing"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_var_names" class="doc_header"><code>test_var_names</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L587" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_var_names</code>(<strong><code>var_names</code></strong>:<code>dict</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_var_names</span><span class="p">(</span><span class="n">var_names</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="store_var_names" class="doc_header"><code>store_var_names</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L595" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>store_var_names</code>(<strong><code>data_path</code></strong>:<code>Path</code>, <strong><code>var_names</code></strong>:<code>dict</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">store_var_names</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">var_names</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_var_names" class="doc_header"><code>load_var_names</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L602" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_var_names</code>(<strong><code>fname</code></strong>:<code>Path</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="c1"># var_names = load_var_names(data_path/&#39;var_names.pckl&#39;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="store_df" class="doc_header"><code>store_df</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L609" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>store_df</code>(<strong><code>path</code></strong>:<code>Path</code>, <strong><code>df</code></strong>:<code>DataFrame</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">store_df</span><span class="p">(</span><span class="n">data_path</span><span class="o">/</span><span class="s1">&#39;X.parquet&#39;</span><span class="p">,</span> <span class="n">df_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">store_df</span><span class="p">(</span><span class="n">data_path</span><span class="o">/</span><span class="s1">&#39;X_test.parquet&#39;</span><span class="p">,</span> <span class="n">df_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_df" class="doc_header"><code>load_df</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L612" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_df</code>(<strong><code>path</code></strong>:<code>Path</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">load_df</span><span class="p">(</span><span class="n">data_path</span><span class="o">/</span><span class="s1">&#39;X.parquet&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="All-processing-in-one">All processing in one<a class="anchor-link" href="#All-processing-in-one"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocess_all" class="doc_header"><code>preprocess_all</code><a href="https://github.com/eschmidt42/ashrae/tree/master/ashrae/preprocessing.py#L615" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocess_all</code>(<strong><code>ashrae_data</code></strong>:<code>dict</code>, <strong><code>tfms_config</code></strong>:<code>dict</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">tfms_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;add_random_noise_features&#39;</span><span class="p">:{},</span>
    <span class="s1">&#39;add_time_features&#39;</span><span class="p">:{},</span>
    <span class="s1">&#39;add_weather_features&#39;</span><span class="p">:{</span><span class="s1">&#39;fix_time_offset&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                            <span class="s1">&#39;add_na_indicators&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
                            <span class="s1">&#39;impute_nas&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span>
    <span class="s1">&#39;add_building_features&#39;</span><span class="p">:{},</span>
<span class="p">}</span>

<span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span><span class="p">,</span> <span class="n">var_names</span> <span class="o">=</span> <span class="n">preprocess_all</span><span class="p">(</span><span class="n">ashrae_data</span><span class="p">,</span> <span class="n">tfms_config</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

